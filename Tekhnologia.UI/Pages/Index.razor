@page "/"
@using Tekhnologia.UI.Services.Interfaces
@inject IAuthStateService AuthState
@inject IUserClient UserClient

@if (!AuthState.Initialized)
{
    <p>Loading...</p>
}
else if (AuthState.IsLoggedIn)
{
    <section class="home">
        <div class="home-intro">
            <h1 class="title is-1">Welcome to Tekhnologia</h1>
            <hr class="hr" />
            <p class="home-text">Hi @firstName üëã, your tools for clarity and momentum are ready.</p>
            <p class="home-subtext">
                Jump into your <a class="link" href="/journal">Journal</a>,
                refine your <a class="link" href="/visionboard">Vision Board</a>,
                or catch up with your <a class="link" href="/aicoach">AI Coach</a>.
            </p>
            <div class="home-buttons buttons">
                <div class="home-buttons-shine">
                    <a class="shine" href="/goaltracker"><span>Go to Goal Tracker</span></a>
                </div>
            </div>
        </div>
    </section>
}
else
{
    <section class="home">
        <div class="home-intro">
            <h1 class="title is-1">Advance Your Career</h1>
            <hr class="hr" />
            <p class="home-text">Empowering women in tech with evidence-based tools.</p>
            <p class="home-subtext">
                Leverage our <a class="link" href="/goaltracker">Goal Tracker</a>, reflective <a class="link" href="/journal">Journal</a>,
                visionary <a class="link" href="/visionboard">Vision Board</a>, AI-powered <a class="link" href="/aicoach">AI Coach</a>,
                and a rich <a class="link" href="/resources">Resource Hub</a> to unlock your full potential.
            </p>
            <div class="home-buttons buttons">
                <div class="home-buttons-shine">
                    <a class="shine" href="/signup"><span>Get Started for Free</span></a>
                </div>
            </div>
        </div>
    </section>
}

<!-- Shared sections for both views (migrated from legacy Home.razor) -->
<section class="section">
    <h2 class="title section-title has-text-centered">Why Tekhnologia?</h2>
    <div class="columns is-multiline">
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">üåç Reclaiming Tech</h3>
                <p>
                    The name Tekhnologia comes from the Greek word œÑŒµœáŒΩŒøŒªŒøŒ≥ŒØŒ± (technolog√≠a), which originally meant the study or knowledge of craft and art.
                </p>
            </div>
        </div>
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">üí™ Closing the Gender Gap</h3>
                <p>
                    Less than 30% of STEM jobs are held by women. Tekhnologia addresses the barriers head-on ‚Äî from confidence gaps to lack of mentorship.
                </p>
            </div>
        </div>
    </div>
</section>

<section class="section has-text-centered">
    <h2 class="title section-title">What You‚Äôll Get</h2>
    <div class="feature-boxes-row">

        <a href="/aicoach" class="feature-box link-box">
            <h3>Career Coaching</h3>
            <p class="feature-subtext">Get real-time support from our AI Coach built for women in tech.</p>
        </a>

        <a href="/goaltracker" class="feature-box link-box">
            <h3>Goal Tracker</h3>
            <p class="feature-subtext">Break down ambitions into practical, trackable milestones.</p>
        </a>

        <a href="/visionboard" class="feature-box link-box">
            <h3>Vision Board</h3>
            <p class="feature-subtext">Stay motivated by visualising the future you're working toward.</p>
        </a>

        <a href="/journal" class="feature-box link-box">
            <h3>Journaling & Affirmations</h3>
            <p class="feature-subtext">Strengthen mental resilience through reflective practice.</p>
        </a>

    </div>
</section>

<section class="section has-text-centered">
    <h2 class="title section-title">Built on Science</h2>
    <div class="columns is-multiline">
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">üß† Visualization Works</h3>
                <p>
                    Vision boards and mental imagery activate brain areas involved in planning and motivation (Oettingen, 2014).
                </p>
            </div>
        </div>
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">üìì Journaling Boosts Resilience</h3>
                <p>
                    Gratitude journaling and affirmations reduce stress and increase self-esteem (Emmons & McCullough, 2003).
                </p>
            </div>
        </div>
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">ü§ñ AI Coaching = Accessibility</h3>
                <p>
                    AI coaches deliver consistent, bias-free support to those without mentorship access (McKinsey, 2021).
                </p>
            </div>
        </div>
        <div class="column is-half">
            <div class="box">
                <h3 class="title is-5">üìà Career Support Retains Women</h3>
                <p>
                    Structured coaching leads to higher retention, promotion, and satisfaction (National Academies, 2020).
                </p>
            </div>
        </div>
    </div>
</section>

<section class="section has-text-centered">
    <h2 class="title section-title">Ready to grow with us?</h2>
    <div class="home-buttons buttons">
        <div class="home-buttons-shine">
            <a class="shine" href="/signup"><span>Join Tekhnologia</span></a>
        </div>
    </div>
</section>
@code {
    private string? firstName;

    protected override async Task OnInitializedAsync()
    {
        await AuthState.RefreshAsync();
        if (AuthState.IsLoggedIn)
        {
            var user = await UserClient.GetCurrentUserAsync();
            firstName = user?.Name?.Split(' ')?.FirstOrDefault();
        }
    }
}